<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Game Homepage</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex items-start justify-center pt-14 bg-[#012158] text-white">

  <div class="text-center max-w-xl px-6 mx-auto">

  
    <img src="assets/bp.png" alt="Game Logo" class="mx-auto mb-0 w-60 sm:w-80" />

   
    <p class="text-sm text-blue-100 -mt-10 mb-10">
      Is an educational board game inspired by snakes and ladders that focuses on the role of engineers in achieving the 17 Sustainable Development Goals (SDGs). Players move across a development-themed board where progress and setbacks represent real-world engineering successes and challenges. Advancements symbolize innovations and effective engineering solutions. while regressions reflect poor planning, System failures or unsustainable practices. Through this design, the game helps students understand how engineering decisions can either accelerate or hinder sustainable development.
    </p>

    
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 justify-items-center">

     
      <a href="questions.html" class="w-full inline-block text-center px-6 py-3 rounded-xl border border-blue-300/40 
        bg-white/10 backdrop-blur-md 
        hover:bg-white/20 hover:border-blue-300
        transition-all duration-300 font-semibold tracking-wide">
        Questions
      </a>

     
      <a href="players.html" class="w-full inline-block text-center px-6 py-3 rounded-xl border border-blue-300/40 
        bg-white/10 backdrop-blur-md 
        hover:bg-white/20 hover:border-blue-300
        transition-all duration-300 font-semibold tracking-wide">
        Player Info
      </a>

     
      <a href="shop.php" class="w-full inline-block text-center px-6 py-3 rounded-xl border border-blue-300/40 
        bg-white/10 backdrop-blur-md 
        hover:bg-white/20 hover:border-blue-300
        transition-all duration-300 font-semibold tracking-wide">
        Player Shop
      </a>

     
      <button id="endGameBtn" class="w-full px-6 py-3 rounded-xl border border-red-400/60 
        bg-white/10 backdrop-blur-md text-red-300
        hover:bg-red-500/20 hover:border-red-400
        transition-all duration-300 font-semibold tracking-wide">
        End Game
      </button>

    </div>
  </div>

 
  <div id="winnerModal" class="fixed inset-0 flex items-center justify-center bg-black/80 hidden z-50">
    <div class="bg-[#012158] border border-yellow-400/50 rounded-xl p-8 w-11/12 max-w-lg text-center shadow-2xl shadow-yellow-400/20">
      <h2 class="text-3xl font-bold text-yellow-400 mb-2">GAME OVER</h2>
      <div class="text-blue-200 mb-6">And the winner is...</div>
      
      <div id="winnerDisplay" class="text-4xl font-black text-white mb-8 animate-bounce">
        PLAYER X
      </div>

      <div id="finalScores" class="space-y-3 mb-8 text-left bg-white/5 p-4 rounded-lg">

      </div>

      <div class="flex justify-center gap-4">
        <button id="closeWinnerModal" class="px-6 py-2 rounded-lg border border-white/20 hover:bg-white/10 transition text-white">Close</button>
        <button id="resetGameBtn" class="px-6 py-2 rounded-lg bg-red-500/20 text-red-300 border border-red-500/50 hover:bg-red-500/40 transition">Reset Game</button>
      </div>
    </div>
  </div>

  <script>
    const endGameBtn = document.getElementById('endGameBtn');
    const winnerModal = document.getElementById('winnerModal');
    const closeWinnerModal = document.getElementById('closeWinnerModal');
    const resetGameBtn = document.getElementById('resetGameBtn');
    const winnerDisplay = document.getElementById('winnerDisplay');
    const finalScores = document.getElementById('finalScores');

    const PLAYER_KEY = 'blue_game_players_v1';

    function loadPlayers(){
      try{
        const raw = localStorage.getItem(PLAYER_KEY);
      
        if (!raw) return {1: {sdg: 0, sp: 0}, 2: {sdg: 0, sp: 0}, 3: {sdg: 0, sp: 0}, 4: {sdg: 0, sp: 0}};
        return JSON.parse(raw);
      }catch(e){
        return {1: {sdg: 0, sp: 0}, 2: {sdg: 0, sp: 0}, 3: {sdg: 0, sp: 0}, 4: {sdg: 0, sp: 0}};
      }
    }

    endGameBtn.addEventListener('click', () => {
      const players = loadPlayers();
      const playerList = [];

     
      for(let i=1; i<=4; i++) {
        const p = players[i] || {sdg:0, sp:0};
        const total = (p.sdg || 0) + (p.sp || 0);
        playerList.push({id: i, total: total, sdg: p.sdg||0, sp: p.sp||0});
      }

    
      playerList.sort((a,b) => b.total - a.total);

    
      const maxScore = playerList[0].total;
      const winners = playerList.filter(p => p.total === maxScore);

      if (winners.length === 1) {
        winnerDisplay.textContent = `PLAYER ${winners[0].id}`;
      } else {
        winnerDisplay.textContent = `TIE: ${winners.map(w => 'P'+w.id).join(' & ')}`;
      }

    
      let scoreHtml = '';
      playerList.forEach(p => {
        scoreHtml += `
          <div class="flex justify-between items-center border-b border-white/10 pb-2 last:border-0">
            <span class="font-semibold text-blue-100">Player ${p.id}</span>
            <div class="text-right">
              <span class="text-xl font-bold text-white">${p.total}</span> <span class="text-xs text-blue-300">pts</span>
              <div class="text-[10px] text-blue-400">(${p.sdg} SDG + ${p.sp} SP)</div>
            </div>
          </div>`;
      });

      finalScores.innerHTML = scoreHtml;
      winnerModal.classList.remove('hidden');
    });

    closeWinnerModal.addEventListener('click', () => {
      winnerModal.classList.add('hidden');
    });

    resetGameBtn.addEventListener('click', () => {
      if(confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
        localStorage.removeItem(PLAYER_KEY);
        location.reload();
      }
    });
  </script>
</body>
</html>
